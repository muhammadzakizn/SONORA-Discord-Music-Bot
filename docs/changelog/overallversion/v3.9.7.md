# v3.9.8 - Profile Avatar Fixes

**Release Date:** 2025-12-18

## Web Changes

### Crop Modal Visibility
- Removed redundant overlay causing crop dialog to be too dark
- Image now clearly visible during cropping

### Custom Avatar Propagation
- Added customAvatar to NavLiquidGlass and admin layout
- Custom avatar now shows immediately in navbar and all profile components

## Previous Version
- v3.9.7: MFA & Login Fixes

---

# v3.9.7 - MFA & Login Fixes

**Release Date:** 2025-12-18

## Web Changes

### MFA Login Flow Fixes
- Fixed all MFA methods (Discord DM, Passkey, Authenticator App) not working
- Root cause: Functions checked `if (!user) return` which failed during OAuth flow
- Changed to accept either session user OR authUser from OAuth callback
- Fixed functions: handlePasskeyVerify, sendVerificationCode, handleVerifyCode

### Post-Login UI Fixes
- Fixed NavLiquidGlass profile not showing after login until refresh
- Changed router.push to window.location.href for full page reload
- Profile and logout buttons now appear immediately after MFA success

### Servers Page Improvements
- Stats now show only user's managed servers (owner/admin access)
- "Total Servers" shows count of servers user manages, not total bot servers
- "Total Members" shows members from managed servers only

## Previous Version
- v3.9.6: Vercel Deployment & API Configuration
