# Bot Changelog v3.21.0 - Syllable Detection Lyrics

**Release Date:** 2025-12-19

## New Feature

### Syllable Timing Detection
- Added `has_syllable_timing` flag to LyricsData model
- Per-word glow only when real syllable data exists from:
  - Apple Music TTML with `<span>` timing
  - Musixmatch Richsync
- When no syllable timing: shows line-level highlight (cleaner for rap/fast lyrics)

## Files Modified
- `database/models.py` - Added has_syllable_timing field
- `services/lyrics/applemusic.py` - Set flag from TTML parsing
- `services/lyrics/musixmatch.py` - Set flag (always true for richsync)
- `web/api/app.py` - Include flag in API response

## Web Changes
- `FullscreenLyricsPlayer.tsx` - Check flag before per-word highlighting
