# Bot Changelog v3.18.0 - Audio File Registry Protection

**Release Date:** 2025-12-19

## Bug Fix

### Audio Deleted Too Early
Fixed bug where audio files were deleted before playback finished.

**Problem:**
- File 0.0MB = empty/deleted
- Playback ended immediately after start
- Startup cleanup could delete active files

**Solution:**
Created `AudioFileRegistry` to track active files:
- Register file when playback starts
- Unregister when cleanup runs
- Startup cleanup skips active files

### Files Created
- `services/audio/file_registry.py` - AudioFileRegistry class

### Files Modified
- `core/bot.py` - Startup cleanup checks registry
- `ui/media_player.py` - Register on play, unregister on cleanup
