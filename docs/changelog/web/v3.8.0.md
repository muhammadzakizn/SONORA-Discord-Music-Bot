# v3.8.0 - Security & Missing Features

**Release Date:** December 13, 2025

## ğŸ”’ Security Enhancements

### Bank-Level Security (Already Implemented)
- âœ… Rate limiting middleware (100 req/min)
- âœ… Content Security Policy (CSP)
- âœ… XSS Protection headers
- âœ… Clickjacking prevention (X-Frame-Options)
- âœ… HSTS (Strict Transport Security)
- âœ… MFA (Passkey, TOTP, OTP)

## ğŸ“£ Push Notifications

### New Features
- Service Worker (`sw.js`) for push notifications
- Custom notification sound support
- Offline caching for PWA
- `/api/push/subscribe` - Subscribe endpoint
- `/api/push/send` - Send notification endpoint

## ğŸ« Support Ticket System

### New API: `/api/support/tickets`
- SONORA-XXXXX-XXXX ticket code generation
- Full CRUD operations (Create, Read, Update, Delete)
- 15-day automatic deletion after resolution
- Follow-up submission (one-time)
- Status tracking (new, reviewing, in-progress, resolved, closed)
- Admin responses

## ğŸ“œ Legal Documents Updated

### Privacy Policy
- 5.1 Support Ticket Retention Policy (15-day rule)
- 5.2 Ban Records Retention

### Terms of Service
- 8. Account Suspension and Bans (ban reasons, types, appeal process)
- 9. Support Ticket Policies

## ğŸ“Š Build Stats
- Total Routes: 43
- New API Endpoints: 3
- Security Headers: 7

---

## ğŸ–±ï¸ Component Status Dialogs (December 13, 2025)

### Developer Monitoring Page Enhancement
- All 8 component status cards are now clickable
- Opens detailed dialog with component description, status, metrics, issues

### New Components
- `ComponentStatusDialog.tsx` - Generic dialog for component details
- `CacheManagementDialog.tsx` - Comprehensive cache management dialog

### Cache Management Features
- View 5 cache types: Audio, Artwork, Python, Next.js, In-Memory
- Individual delete buttons per cache type
- "Delete All Cache" button
- Auto-cleanup settings: size limit, age limit, warning threshold

---

## ğŸ“¨ Broadcast Messaging Overhaul (December 13, 2025)

### New Target Options
- **All Servers** - Send to all servers (1 channel per server with send permission)
- **Specific Channel** - Select server, then pick specific channels
- **DM Users** - Send direct messages to selected users from persistent database

### Channel Information
- Shows all channel types: text, voice, stage
- Displays permission status (âœ“ Can Send / âœ— No Permission)
- Category grouping for easier navigation
- Multi-select channels with "Select All Sendable" option

### Mention Options
- None (default)
- @everyone - Mentions all server members
- @here - Mentions online members only

### New API Endpoints
- `GET /api/admin/guilds/channels` - Updated with voice/stage channels, permissions
- `POST /api/admin/dm-users` - Send DM to multiple users

### Persistent User Database
- All users from all guilds stored in `config/users_database.json`
- Users persist even after leaving server (only removed manually)
- Sync button to refresh user list from current guilds
- Delete individual users from database

---

## ğŸ“ Dynamic Changelog Management (December 13, 2025)

### New Feature: Changelog Editor
- Changelog now stored in `config/changelog.json`, not hardcoded
- /changelog page reads entries dynamically from API

### New Developer Page: `/developer/changelog`
- View all changelog entries in collapsible cards
- Add new entries with version, date, title
- Add highlights and categorized changes
- Delete entries directly from dashboard
- Link to view public /changelog page

### New API Endpoints
- `GET /api/changelog` - Get all changelog data
- `GET/POST /api/changelog/entries` - List or add entries
- `GET/PUT/DELETE /api/changelog/entries/:id` - Manage specific entry
- `GET/PUT /api/changelog/version` - Manage version numbers
